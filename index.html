<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>故事卡競拍遊戲</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <h1>故事卡競拍遊戲</h1>
        <button onclick="downloadConsoleLog()" id="downloadLogBtn">匯出遊戲紀錄</button>
    </header>

    <div class="container">
        <div class="setup">
            <h2>遊戲設定</h2>
            <div class="player-options">
                <h3>選擇玩家人數:</h3>
                <button id="player1" onclick="selectPlayerCountUI(1)">1人</button>
                <button id="player2" onclick="selectPlayerCountUI(2)">2人</button>
                <button id="player3" onclick="selectPlayerCountUI(3)">3人</button>
            </div>
            <div id="characterSelectionUI" style="display:none;">
                <h3>選擇角色:</h3>
                <div id="characterSelectorsContainer">
                    </div>
                <p id="characterSelectionError" class="error-message"></p>
                <button id="confirmCharactersButton" onclick="confirmCharacterSelections()" disabled>確認角色選擇</button>
            </div>
            <button id="startButton" onclick="startGame()" disabled style="margin-top: 20px;">開始遊戲</button>
        </div>

        <div class="game-area" style="display:none;">
            <h2 id="roundTitle">第1回合</h2>

            <div id="marketSelection">
                <h3 id="marketSelectionTitle">市場選卡: 請選擇 N 張</h3>
                <div id="marketArea" class="card-selection-area">
                    </div>
                <button id="resetMarketSelectionBtn" onclick="resetMarketCardSelection()">重設市場選擇</button>
                <button id="confirmMarket" onclick="confirmMarket()" disabled>確認市場卡片</button>
            </div>

            <div id="playerActions" style="display:none;">
                <h3>玩家行動</h3>
                <div class="player-action-zones">
                    <div id="playerA" class="player-zone" style="display:none;">
                        <h3>A玩家 (角色名)</h3>
                        <div class="time-bar-container"><div class="bar-inner" id="barA">12</div></div>
                        <div id="actionsA" class="action-buttons"></div>
                        <div id="manualControlsA" class="manual-controls" style="display:none;"></div>
                    </div>
                    <div id="playerB" class="player-zone" style="display:none;">
                        <h3>B玩家 (角色名)</h3>
                        <div class="time-bar-container"><div class="bar-inner" id="barB">12</div></div>
                        <div id="actionsB" class="action-buttons"></div>
                        <div id="manualControlsB" class="manual-controls" style="display:none;"></div>
                    </div>
                    <div id="playerC" class="player-zone" style="display:none;">
                        <h3>C玩家 (角色名)</h3>
                        <div class="time-bar-container"><div class="bar-inner" id="barC">12</div></div>
                        <div id="actionsC" class="action-buttons"></div>
                        <div id="manualControlsC" class="manual-controls" style="display:none;"></div>
                    </div>
                </div>
                <div class="game-controls">
                    <button id="backToMarketSelectionBtn" onclick="backToMarketSelection()" style="display:none;">返回市場選卡</button>
                    <button id="nextRoundBtn" onclick="nextRound()" disabled>處理本回合行動 / 進入下一回合</button>
                </div>
            </div>
        </div>

        <div id="timeline" style="display:none;">
            <h2>遊戲時間軸</h2>
            <div id="timelineA" class="timeline-player-zone" style="display:none;">
                <h3>A玩家 (角色名) 時間軸</h3>
                <div class="timeline-track">
                    <div id="eventsA" class="events-container"></div>
                </div>
            </div>
            <div id="timelineB" class="timeline-player-zone" style="display:none;">
                <h3>B玩家 (角色名) 時間軸</h3>
                <div class="timeline-track">
                    <div id="eventsB" class="events-container"></div>
                </div>
            </div>
            <div id="timelineC" class="timeline-player-zone" style="display:none;">
                <h3>C玩家 (角色名) 時間軸</h3>
                <div class="timeline-track">
                    <div id="eventsC" class="events-container"></div>
                </div>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>